var parent_keyboard=$("#keyboards"),parent_msg=$("#msg_show");function keyboard_update(c){parent_keyboard.empty();$.each(c,function(a,b){parent_keyboard.append($("<a>",{text:b,click:function(){keyboard_click(b)},"class":"btn waves-effect waves-light keyboard_button"}))})}function keyboard_click(c){$.ajax({url:base_url+"message",type:"POST",data:JSON.stringify({user_key:"dummy",content:c,type:"text"}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(a){var b=$("<div>",{"class":"card one_msg"});b.append($("<div>",{"class":"card-content"}).html(a.message.text.replace(/\n/g,"<br>")));null!=a.message.photo&&b.append($("<div>",{"class":"card-image"}).append($("<img>",{src:a.message.photo.url,width:a.message.photo.width,height:a.message.photo.height})));null!=a.message.message_button&&b.append($("<div>",{"class":"card-action center-align"}).append($("<a>",{text:a.message.message_button.label,click:function(){alert('"'+a.message.message_button.url+'"\ub85c \uc774\ub3d9')},href:a.message.message_button.url,target:"_blank"})));parent_msg.append(b).append("<br>");parent_msg.parent().scrollTop(parent_msg[0].scrollHeight);null!=a.keyboard?keyboard_update(a.keyboard.buttons):keyboard_update([])}})}$(document).ready(function(){$.get(base_url+"keyboard",function(){}).done(function(c){keyboard_update(c.buttons)}).fail(function(){alert("Failed to load Home keyboard!")})});